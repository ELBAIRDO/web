

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HTTP route management and RDS &mdash; envoy 1.5.0-tag-v1.5.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="envoy 1.5.0-tag-v1.5.0 documentation" href="../index.html"/>
        <link rel="up" title="v2 API reference" href="api.html"/>
        <link rel="next" title="Common TLS configuration" href="sds.proto.html"/>
        <link rel="prev" title="Health check" href="health_check.proto.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> envoy
          

          
          </a>

          
            
            
              <div class="version">
                1.5.0-tag-v1.5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Building and installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-v1/api.html">v1 API reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">v2 API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bootstrap.proto.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="lds.proto.html">Listeners and LDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="cds.proto.html">Clusters and CDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="eds.proto.html">Endpoints and EDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="health_check.proto.html">Health check</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">HTTP route management and RDS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#routeconfiguration">RouteConfiguration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#virtualhost">VirtualHost</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enum-virtualhost-tlsrequirementtype">Enum VirtualHost.TlsRequirementType</a></li>
<li class="toctree-l3"><a class="reference internal" href="#route">Route</a></li>
<li class="toctree-l3"><a class="reference internal" href="#weightedcluster">WeightedCluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#weightedcluster-clusterweight">WeightedCluster.ClusterWeight</a></li>
<li class="toctree-l3"><a class="reference internal" href="#routematch">RouteMatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#corspolicy">CorsPolicy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#routeaction">RouteAction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#routeaction-retrypolicy">RouteAction.RetryPolicy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#routeaction-requestmirrorpolicy">RouteAction.RequestMirrorPolicy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#routeaction-hashpolicy">RouteAction.HashPolicy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#routeaction-hashpolicy-header">RouteAction.HashPolicy.Header</a></li>
<li class="toctree-l3"><a class="reference internal" href="#routeaction-hashpolicy-cookie">RouteAction.HashPolicy.Cookie</a></li>
<li class="toctree-l3"><a class="reference internal" href="#routeaction-hashpolicy-connectionproperties">RouteAction.HashPolicy.ConnectionProperties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enum-routeaction-clusternotfoundresponsecode">Enum RouteAction.ClusterNotFoundResponseCode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#redirectaction">RedirectAction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enum-redirectaction-redirectresponsecode">Enum RedirectAction.RedirectResponseCode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decorator">Decorator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#virtualcluster">VirtualCluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratelimit">RateLimit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratelimit-action">RateLimit.Action</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratelimit-action-sourcecluster">RateLimit.Action.SourceCluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratelimit-action-destinationcluster">RateLimit.Action.DestinationCluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratelimit-action-requestheaders">RateLimit.Action.RequestHeaders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratelimit-action-remoteaddress">RateLimit.Action.RemoteAddress</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratelimit-action-generickey">RateLimit.Action.GenericKey</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ratelimit-action-headervaluematch">RateLimit.Action.HeaderValueMatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#headermatcher">HeaderMatcher</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sds.proto.html">Common TLS configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="base.proto.html">Common types</a></li>
<li class="toctree-l2"><a class="reference internal" href="address.proto.html">Network addresses</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol.proto.html">Protocol options</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery.proto.html">Common discovery API components</a></li>
<li class="toctree-l2"><a class="reference internal" href="rls.proto.html">Common rate limit components</a></li>
<li class="toctree-l2"><a class="reference internal" href="filter/filter.html">Filters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">envoy</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="api.html">v2 API reference</a> &raquo;</li>
        
      <li>HTTP route management and RDS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api-v2/rds.proto.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="http-route-management-and-rds">
<span id="envoy-api-file-api-rds-proto"></span><h1>HTTP route management and RDS<a class="headerlink" href="#http-route-management-and-rds" title="Permalink to this headline">¶</a></h1>
<div class="section" id="routeconfiguration">
<span id="envoy-api-msg-routeconfiguration"></span><h2>RouteConfiguration<a class="headerlink" href="#routeconfiguration" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L35">[RouteConfiguration proto]</a></p>
<ul class="simple">
<li>Routing <a class="reference internal" href="../intro/arch_overview/http_routing.html#arch-overview-http-routing"><span class="std std-ref">architecture overview</span></a></li>
<li>HTTP <a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router"><span class="std std-ref">router filter</span></a></li>
</ul>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;virtual_hosts&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;internal_only_headers&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;response_headers_to_add&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;response_headers_to_remove&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;request_headers_to_add&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;validate_clusters&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routeconfiguration-name">
<dt>name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The name of the route configuration. For example, it might match
<a class="reference internal" href="filter/network/http_connection_manager.proto.html#envoy-api-field-filter-network-rds-route-config-name"><span class="std std-ref">route_config_name</span></a> in
<a class="reference internal" href="filter/network/http_connection_manager.proto.html#envoy-api-msg-filter-network-rds"><span class="std std-ref">filter.network.Rds</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeconfiguration-virtual-hosts">
<dt>virtual_hosts</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-virtualhost"><span class="std std-ref">VirtualHost</span></a>) An array of virtual hosts that make up the route table.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeconfiguration-internal-only-headers">
<dt>internal_only_headers</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Optionally specifies a list of HTTP headers that the connection manager
will consider to be internal only. If they are found on external requests they will be cleaned
prior to filter invocation. See <a class="reference internal" href="../configuration/http_conn_man/headers.html#config-http-conn-man-headers-x-envoy-internal"><span class="std std-ref">x-envoy-internal</span></a> for more
information.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeconfiguration-response-headers-to-add">
<dt>response_headers_to_add</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-headervalueoption"><span class="std std-ref">HeaderValueOption</span></a>) Specifies a list of HTTP headers that should be added to each response that
the connection manager encodes. Headers specified at this level are applied
after headers from any enclosed <a class="reference internal" href="#envoy-api-msg-virtualhost"><span class="std std-ref">VirtualHost</span></a> or
<a class="reference internal" href="#envoy-api-msg-routeaction"><span class="std std-ref">RouteAction</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeconfiguration-response-headers-to-remove">
<dt>response_headers_to_remove</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies a list of HTTP headers that should be removed from each response
that the connection manager encodes.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeconfiguration-request-headers-to-add">
<dt>request_headers_to_add</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-headervalueoption"><span class="std std-ref">HeaderValueOption</span></a>) Specifies a list of HTTP headers that should be added to each request
routed by the HTTP connection manager. Headers specified at this level are
applied after headers from any enclosed <a class="reference internal" href="#envoy-api-msg-virtualhost"><span class="std std-ref">VirtualHost</span></a> or
<a class="reference internal" href="#envoy-api-msg-routeaction"><span class="std std-ref">RouteAction</span></a>. For more information see the documentation on
<a class="reference internal" href="../configuration/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">custom request headers</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeconfiguration-validate-clusters">
<dt>validate_clusters</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) An optional boolean that specifies whether the clusters that the route
table refers to will be validated by the cluster manager. If set to true
and a route refers to a non-existent cluster, the route table will not
load. If set to false and a route refers to a non-existent cluster, the
route table will load and the router filter will return a 404 if the route
is selected at runtime. This setting defaults to true if the route table
is statically defined via the <a class="reference internal" href="filter/network/http_connection_manager.proto.html#envoy-api-field-filter-network-httpconnectionmanager-route-config"><span class="std std-ref">route_config</span></a> option. This setting
default to false if the route table is loaded dynamically via the <a class="reference internal" href="filter/network/http_connection_manager.proto.html#envoy-api-field-filter-network-httpconnectionmanager-rds"><span class="std std-ref">rds</span></a> option. Users
may which to override the default behavior in certain cases (for example
when using CDS with a static route table).</dd>
</dl>
</div>
<div class="section" id="virtualhost">
<span id="envoy-api-msg-virtualhost"></span><h2>VirtualHost<a class="headerlink" href="#virtualhost" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L87">[VirtualHost proto]</a></p>
<p>The top level element in the routing configuration is a virtual host. Each virtual host has
a logical name as well as a set of domains that get routed to it based on the incoming request’s
host header. This allows a single listener to service multiple top level domain path trees. Once
a virtual host is selected based on the domain, the routes are processed in order to see which
upstream cluster to route to or whether to perform a redirect.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;domains&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;routes&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;require_tls&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;virtual_clusters&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;rate_limits&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;request_headers_to_add&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;response_headers_to_add&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;response_headers_to_remove&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;cors&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-virtualhost-name">
<dt>name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The logical name of the virtual host. This is used when emitting certain
statistics but is not relevant for routing.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-domains">
<dt>domains</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) A list of domains (host/authority header) that will be matched to this
virtual host. Wildcard hosts are supported in the form of “<em>.foo.com” or
“</em>-bar.foo.com”.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The wildcard will not match the empty string.
e.g. “<em>-bar.foo.com” will match “baz-bar.foo.com” but not “-bar.foo.com”.
Additionally, a special entry “</em>” is allowed which will match any
host/authority header. Only a single virtual host in the entire route
configuration can match on “*”. A domain must be unique across all virtual
hosts or the config will fail to load.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-routes">
<dt>routes</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-route"><span class="std std-ref">Route</span></a>) The list of routes that will be matched, in order, for incoming requests.
The first route that matches will be used.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-require-tls">
<dt>require_tls</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-virtualhost-tlsrequirementtype"><span class="std std-ref">VirtualHost.TlsRequirementType</span></a>) Specifies the type of TLS enforcement the virtual host expects. If this option is not
specified, there is no TLS requirement for the virtual host.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-virtual-clusters">
<dt>virtual_clusters</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-virtualcluster"><span class="std std-ref">VirtualCluster</span></a>) A list of virtual clusters defined for this virtual host. Virtual clusters
are used for additional statistics gathering.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-rate-limits">
<dt>rate_limits</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-ratelimit"><span class="std std-ref">RateLimit</span></a>) Specifies a set of rate limit configurations that will be applied to the
virtual host.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-request-headers-to-add">
<dt>request_headers_to_add</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-headervalueoption"><span class="std std-ref">HeaderValueOption</span></a>) Specifies a list of HTTP headers that should be added to each request
handled by this virtual host. Headers specified at this level are applied
after headers from enclosed <a class="reference internal" href="#envoy-api-msg-routeaction"><span class="std std-ref">RouteAction</span></a> and before headers from the
enclosing <a class="reference internal" href="#envoy-api-msg-routeconfiguration"><span class="std std-ref">RouteConfiguration</span></a>. For more information see the documentation
on <a class="reference internal" href="../configuration/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">custom request headers</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-response-headers-to-add">
<dt>response_headers_to_add</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-headervalueoption"><span class="std std-ref">HeaderValueOption</span></a>) Specifies a list of HTTP headers that should be added to each response
handled by this virtual host. Headers specified at this level are applied
after headers from enclosed <a class="reference internal" href="#envoy-api-msg-routeaction"><span class="std std-ref">RouteAction</span></a> and before headers from the
enclosing <a class="reference internal" href="#envoy-api-msg-routeconfiguration"><span class="std std-ref">RouteConfiguration</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-response-headers-to-remove">
<dt>response_headers_to_remove</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies a list of HTTP headers that should be removed from each response
handle by this virtual host.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualhost-cors">
<dt>cors</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-corspolicy"><span class="std std-ref">CorsPolicy</span></a>) Indicates that the virtual host has a CORS policy.</dd>
</dl>
</div>
<div class="section" id="enum-virtualhost-tlsrequirementtype">
<span id="envoy-api-enum-virtualhost-tlsrequirementtype"></span><h2>Enum VirtualHost.TlsRequirementType<a class="headerlink" href="#enum-virtualhost-tlsrequirementtype" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L110">[VirtualHost.TlsRequirementType proto]</a></p>
<dl class="docutils" id="envoy-api-enum-value-virtualhost-tlsrequirementtype-none">
<dt>NONE</dt>
<dd><em>(DEFAULT)</em> ⁣No TLS requirement for the virtual host.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-virtualhost-tlsrequirementtype-external-only">
<dt>EXTERNAL_ONLY</dt>
<dd>⁣External requests must use TLS. If a request is external and it is not
using TLS, a 301 redirect will be sent telling the client to use HTTPS.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-virtualhost-tlsrequirementtype-all">
<dt>ALL</dt>
<dd>⁣All requests must use TLS. If a request is not using TLS, a 301 redirect
will be sent telling the client to use HTTPS.</dd>
</dl>
</div>
<div class="section" id="route">
<span id="envoy-api-msg-route"></span><h2>Route<a class="headerlink" href="#route" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L167">[Route proto]</a></p>
<p>A route is both a specification of how to match a request as well as an indication of what to do
next (e.g., redirect, forward, rewrite, etc.).</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Envoy supports routing on HTTP method via <a class="reference internal" href="#envoy-api-msg-headermatcher"><span class="std std-ref">header matching</span></a>.</p>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;route&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;redirect&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metadata&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;decorator&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-route-match">
<dt>match</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-routematch"><span class="std std-ref">RouteMatch</span></a>, <em>REQUIRED</em>) Route matching parameters.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-route-route">
<dt>route</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-routeaction"><span class="std std-ref">RouteAction</span></a>) Route request to some upstream cluster.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-route-route"><span class="std std-ref">route</span></a>, <a class="reference internal" href="#envoy-api-field-route-redirect"><span class="std std-ref">redirect</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-route-redirect">
<dt>redirect</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-redirectaction"><span class="std std-ref">RedirectAction</span></a>) Return a redirect.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-route-route"><span class="std std-ref">route</span></a>, <a class="reference internal" href="#envoy-api-field-route-redirect"><span class="std std-ref">redirect</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-route-metadata">
<dt>metadata</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-metadata"><span class="std std-ref">Metadata</span></a>) The Metadata field can be used to provide additional information
about the route. It can be used for configuration, stats, and logging.
The metadata should go under the filter namespace that will need it.
For instance, if the metadata is intended for the Router filter,
the filter name should be specified as <em>envoy.router</em>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-route-decorator">
<dt>decorator</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-decorator"><span class="std std-ref">Decorator</span></a>) Decorator for the matched route.</dd>
</dl>
</div>
<div class="section" id="weightedcluster">
<span id="envoy-api-msg-weightedcluster"></span><h2>WeightedCluster<a class="headerlink" href="#weightedcluster" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L202">[WeightedCluster proto]</a></p>
<p>Compared to the <a class="reference internal" href="#envoy-api-field-routeaction-cluster"><span class="std std-ref">cluster</span></a> field that specifies a
single upstream cluster as the target of a request, the <a class="reference internal" href="#envoy-api-field-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a> option allows for specification of
multiple upstream clusters along with weights that indicate the percentage of
traffic to be forwarded to each cluster. The router selects an upstream cluster based on the
weights.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;clusters&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;runtime_key_prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-weightedcluster-clusters">
<dt>clusters</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-weightedcluster-clusterweight"><span class="std std-ref">WeightedCluster.ClusterWeight</span></a>, <em>REQUIRED</em>) Specifies one or more upstream clusters associated with the route.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-weightedcluster-runtime-key-prefix">
<dt>runtime_key_prefix</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the runtime key prefix that should be used to construct the
runtime keys associated with each cluster. When the <em>runtime_key_prefix</em> is
specified, the router will look for weights associated with each upstream
cluster under the key <em>runtime_key_prefix</em> + “.” + <em>cluster[i].name</em> where
<em>cluster[i]</em> denotes an entry in the clusters array field. If the runtime
key for the cluster does not exist, the value specified in the
configuration file will be used as the default weight. See the <a class="reference internal" href="../operations/runtime.html#operations-runtime"><span class="std std-ref">runtime documentation</span></a> for how key names map to the underlying implementation.</dd>
</dl>
</div>
<div class="section" id="weightedcluster-clusterweight">
<span id="envoy-api-msg-weightedcluster-clusterweight"></span><h2>WeightedCluster.ClusterWeight<a class="headerlink" href="#weightedcluster-clusterweight" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L203">[WeightedCluster.ClusterWeight proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;weight&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metadata_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-weightedcluster-clusterweight-name">
<dt>name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Name of the upstream cluster. The cluster must exist in the
<a class="reference internal" href="../configuration/cluster_manager/cluster_manager.html#config-cluster-manager"><span class="std std-ref">cluster manager configuration</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-weightedcluster-clusterweight-weight">
<dt>weight</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) An integer between 0-100. When a request matches the route, the choice of
an upstream cluster is determined by its weight. The sum of weights
across all entries in the clusters array must add up to 100.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-weightedcluster-clusterweight-metadata-match">
<dt>metadata_match</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-metadata"><span class="std std-ref">Metadata</span></a>) Optional endpoint metadata match criteria. Only endpoints in the upstream
cluster with metadata matching that set in metadata_match will be
considered. The filter name should be specified as <em>envoy.lb</em>.</dd>
</dl>
</div>
<div class="section" id="routematch">
<span id="envoy-api-msg-routematch"></span><h2>RouteMatch<a class="headerlink" href="#routematch" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L233">[RouteMatch proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;case_sensitive&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;runtime&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routematch-prefix">
<dt>prefix</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) If specified, the route is a prefix rule meaning that the prefix must
match the beginning of the <em>:path</em> header.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routematch-prefix"><span class="std std-ref">prefix</span></a>, <a class="reference internal" href="#envoy-api-field-routematch-path"><span class="std std-ref">path</span></a>, <a class="reference internal" href="#envoy-api-field-routematch-regex"><span class="std std-ref">regex</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routematch-path">
<dt>path</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) If specified, the route is an exact path rule meaning that the path must
exactly match the <em>:path</em> header once the query string is removed.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routematch-prefix"><span class="std std-ref">prefix</span></a>, <a class="reference internal" href="#envoy-api-field-routematch-path"><span class="std std-ref">path</span></a>, <a class="reference internal" href="#envoy-api-field-routematch-regex"><span class="std std-ref">regex</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routematch-regex">
<dt>regex</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) If specified, the route is a regular expression rule meaning that the
regex must match the <em>:path</em> header once the query string is removed. The entire path
(without the query string) must match the regex. The rule will not match if only a
subsequence of the <em>:path</em> header matches the regex. The regex grammar is defined <a class="reference external" href="http://en.cppreference.com/w/cpp/regex/ecmascript">here</a>.</p>
<p>Examples:</p>
<ul class="simple">
<li>The regex <em>/b[io]t</em> matches the path <em>/bit</em></li>
<li>The regex <em>/b[io]t</em> matches the path <em>/bot</em></li>
<li>The regex <em>/b[io]t</em> does not match the path <em>/bite</em></li>
<li>The regex <em>/b[io]t</em> does not match the path <em>/bit/bot</em></li>
</ul>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routematch-prefix"><span class="std std-ref">prefix</span></a>, <a class="reference internal" href="#envoy-api-field-routematch-path"><span class="std std-ref">path</span></a>, <a class="reference internal" href="#envoy-api-field-routematch-regex"><span class="std std-ref">regex</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routematch-case-sensitive">
<dt>case_sensitive</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Indicates that prefix/path matching should be case insensitive. The default
is true.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routematch-runtime">
<dt>runtime</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-runtimeuint32"><span class="std std-ref">RuntimeUInt32</span></a>) Indicates that the route should additionally match on a runtime key. An
integer between 0-100. Every time the route is considered for a match, a
random number between 0-99 is selected. If the number is &lt;= the value found
in the key (checked first) or, if the key is not present, the default
value, the route is a match (assuming everything also about the route
matches). A runtime route configuration can be used to roll out route changes in a
gradual manner without full code/config deploys. Refer to the
<a class="reference internal" href="../configuration/http_conn_man/traffic_splitting.html#config-http-conn-man-route-table-traffic-splitting-shift"><span class="std std-ref">traffic shifting</span></a> docs
for additional documentation.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routematch-headers">
<dt>headers</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-headermatcher"><span class="std std-ref">HeaderMatcher</span></a>) Specifies a set of headers that the route should match on. The router will
check the request’s headers against all the specified headers in the route
config. A match will happen if all the headers in the route are present in
the request with the same values (or based on presence if the value field
is not in the config).</dd>
</dl>
</div>
<div class="section" id="corspolicy">
<span id="envoy-api-msg-corspolicy"></span><h2>CorsPolicy<a class="headerlink" href="#corspolicy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L283">[CorsPolicy proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;allow_origin&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;allow_methods&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;allow_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;expose_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_age&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;allow_credentials&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-corspolicy-allow-origin">
<dt>allow_origin</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the origins that will be allowed to do CORS requests.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-corspolicy-allow-methods">
<dt>allow_methods</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the content for the <em>access-control-allow-methods</em> header.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-corspolicy-allow-headers">
<dt>allow_headers</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the content for the <em>access-control-allow-headers</em> header.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-corspolicy-expose-headers">
<dt>expose_headers</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the content for the <em>access-control-expose-headers</em> header.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-corspolicy-max-age">
<dt>max_age</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the content for the <em>access-control-max-age</em> header.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-corspolicy-allow-credentials">
<dt>allow_credentials</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Specifies whether the resource allows credentials.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-corspolicy-enabled">
<dt>enabled</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Specifies if CORS is enabled. Defaults to true. Only effective on route.</dd>
</dl>
</div>
<div class="section" id="routeaction">
<span id="envoy-api-msg-routeaction"></span><h2>RouteAction<a class="headerlink" href="#routeaction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L306">[RouteAction proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;cluster&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cluster_header&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;weighted_clusters&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cluster_not_found_response_code&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metadata_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;prefix_rewrite&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;host_rewrite&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;auto_host_rewrite&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;timeout&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;retry_policy&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_mirror_policy&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;priority&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_headers_to_add&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;response_headers_to_add&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;response_headers_to_remove&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;rate_limits&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;include_vh_rate_limits&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;hash_policy&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;use_websocket&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cors&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routeaction-cluster">
<dt>cluster</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Indicates the upstream cluster to which the request should be routed
to.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-cluster-header">
<dt>cluster_header</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Envoy will determine the cluster to route to by reading the value of the
HTTP header named by cluster_header from the request headers. If the
header is not found or the referenced cluster does not exist, Envoy will
return a 404 response.</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Internally, Envoy always uses the HTTP/2 <em>:authority</em> header to represent the HTTP/1
<em>Host</em> header. Thus, if attempting to match on <em>Host</em>, match on <em>:authority</em> instead.</p>
</div>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-weighted-clusters">
<dt>weighted_clusters</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-weightedcluster"><span class="std std-ref">WeightedCluster</span></a>) Multiple upstream clusters can be specified for a given route. The
request is routed to one of the upstream clusters based on weights
assigned to each cluster. See the
<a class="reference internal" href="../configuration/http_conn_man/traffic_splitting.html#config-http-conn-man-route-table-traffic-splitting-split"><span class="std std-ref">traffic splitting</span></a>
for additional documentation.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routeaction-cluster"><span class="std std-ref">cluster</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-cluster-not-found-response-code">
<dt>cluster_not_found_response_code</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-routeaction-clusternotfoundresponsecode"><span class="std std-ref">RouteAction.ClusterNotFoundResponseCode</span></a>) The HTTP status code to use when configured cluster is not found.
The default response code is 503 Service Unavailable.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-metadata-match">
<dt>metadata_match</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-metadata"><span class="std std-ref">Metadata</span></a>) Optional endpoint metadata match criteria. Only endpoints in the upstream
cluster with metadata matching that set in metadata_match will be
considered. The filter name should be specified as <em>envoy.lb</em>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-prefix-rewrite">
<dt>prefix_rewrite</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Indicates that during forwarding, the matched prefix (or path) should be
swapped with this value. This option allows application URLs to be rooted
at a different path from those exposed at the reverse proxy layer.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-host-rewrite">
<dt>host_rewrite</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Indicates that during forwarding, the host header will be swapped with
this value.</p>
<p class="last">Only one of <a class="reference internal" href="#envoy-api-field-routeaction-host-rewrite"><span class="std std-ref">host_rewrite</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-auto-host-rewrite"><span class="std std-ref">auto_host_rewrite</span></a> may be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-auto-host-rewrite">
<dt>auto_host_rewrite</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Indicates that during forwarding, the host header will be swapped with
the hostname of the upstream host chosen by the cluster manager. This
option is applicable only when the destination cluster for a route is of
type <em>strict_dns</em> or <em>logical_dns</em>. Setting this to true with other cluster
types has no effect.</p>
<p class="last">Only one of <a class="reference internal" href="#envoy-api-field-routeaction-host-rewrite"><span class="std std-ref">host_rewrite</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-auto-host-rewrite"><span class="std std-ref">auto_host_rewrite</span></a> may be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-timeout">
<dt>timeout</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) Specifies the timeout for the route. If not specified, the default is 15s.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This timeout includes all retries. See also
<a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-upstream-rq-timeout-ms"><span class="std std-ref">x-envoy-upstream-rq-timeout-ms</span></a>,
<a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-upstream-rq-per-try-timeout-ms"><span class="std std-ref">x-envoy-upstream-rq-per-try-timeout-ms</span></a>, and the
<a class="reference internal" href="../intro/arch_overview/http_routing.html#arch-overview-http-routing-retry"><span class="std std-ref">retry overview</span></a>.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-retry-policy">
<dt>retry_policy</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-routeaction-retrypolicy"><span class="std std-ref">RouteAction.RetryPolicy</span></a>) Indicates that the route has a retry policy.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-request-mirror-policy">
<dt>request_mirror_policy</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-routeaction-requestmirrorpolicy"><span class="std std-ref">RouteAction.RequestMirrorPolicy</span></a>) Indicates that the route has a request mirroring policy.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-priority">
<dt>priority</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-enum-routingpriority"><span class="std std-ref">RoutingPriority</span></a>) Optionally specifies the <a class="reference internal" href="../intro/arch_overview/http_routing.html#arch-overview-http-routing-priority"><span class="std std-ref">routing priority</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-request-headers-to-add">
<dt>request_headers_to_add</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-headervalueoption"><span class="std std-ref">HeaderValueOption</span></a>) Specifies a set of headers that will be added to requests matching this
route. Headers specified at this level are applied before headers from the
enclosing <a class="reference internal" href="#envoy-api-msg-virtualhost"><span class="std std-ref">VirtualHost</span></a> and <a class="reference internal" href="#envoy-api-msg-routeconfiguration"><span class="std std-ref">RouteConfiguration</span></a>.
For more information see the documentation on <a class="reference internal" href="../configuration/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">custom request headers</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-response-headers-to-add">
<dt>response_headers_to_add</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-msg-headervalueoption"><span class="std std-ref">HeaderValueOption</span></a>) Specifies a set of headers that will be added to responses to requests
matching this route. Headers specified at this level are applied before
headers from the enclosing <a class="reference internal" href="#envoy-api-msg-virtualhost"><span class="std std-ref">VirtualHost</span></a> and
<a class="reference internal" href="#envoy-api-msg-routeconfiguration"><span class="std std-ref">RouteConfiguration</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-response-headers-to-remove">
<dt>response_headers_to_remove</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies a list of HTTP headers that should be removed from each response
to requests matching this route.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-rate-limits">
<dt>rate_limits</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-ratelimit"><span class="std std-ref">RateLimit</span></a>) Specifies a set of rate limit configurations that could be applied to the
route.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-include-vh-rate-limits">
<dt>include_vh_rate_limits</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Specifies if the rate limit filter should include the virtual host rate
limits. By default, if the route configured rate limits, the virtual host
<a class="reference internal" href="#envoy-api-field-virtualhost-rate-limits"><span class="std std-ref">rate_limits</span></a> are not applied to the request.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-hash-policy">
<dt>hash_policy</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-routeaction-hashpolicy"><span class="std std-ref">RouteAction.HashPolicy</span></a>) Specifies a list of hash policies to use for ring hash load balancing. Each
hash policy is evaluated individually and the combined result is used to
route the request. The method of combination is deterministic such that
identical lists of hash policies will produce the same hash. Since a hash
policy examines specific parts of a request, it can fail to produce a hash
(i.e. if the hashed header is not present). If (and only if) all configured
hash policies fail to generate a hash, no hash will be produced for
the route. In this case, the behavior is the same as if no hash policies
were specified (i.e. the ring hash load balancer will choose a random
backend).</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-use-websocket">
<dt>use_websocket</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Indicates that a HTTP/1.1 client connection to this particular route
should be allowed (and expected) to upgrade to a WebSocket connection. The
default is false.</p>
<div class="last admonition attention">
<p class="first admonition-title">Attention</p>
<p>If set to true, Envoy will expect the first request matching this route to
contain WebSocket upgrade headers. If the headers are not present, the
connection will be rejected. If set to true, Envoy will setup plain TCP
proxying between the client and the upstream server. Hence, an upstream
server that rejects the WebSocket upgrade request is also responsible for
closing the associated connection. Until then, Envoy will continue to
proxy data from the client to the upstream server.</p>
<p class="last">Redirects, timeouts and retries are not supported on routes where websocket upgrades are
allowed.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-cors">
<dt>cors</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-corspolicy"><span class="std std-ref">CorsPolicy</span></a>) Indicates that the route has a CORS policy.</dd>
</dl>
</div>
<div class="section" id="routeaction-retrypolicy">
<span id="envoy-api-msg-routeaction-retrypolicy"></span><h2>RouteAction.RetryPolicy<a class="headerlink" href="#routeaction-retrypolicy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L380">[RouteAction.RetryPolicy proto]</a></p>
<p>HTTP retry <a class="reference internal" href="../intro/arch_overview/http_routing.html#arch-overview-http-routing-retry"><span class="std std-ref">architecture overview</span></a>.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;retry_on&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;num_retries&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;per_try_timeout&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routeaction-retrypolicy-retry-on">
<dt>retry_on</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the conditions under which retry takes place. These are the same
conditions documented for <a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-on"><span class="std std-ref">x-envoy-retry-on</span></a> and
<a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-grpc-on"><span class="std std-ref">x-envoy-retry-grpc-on</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-retrypolicy-num-retries">
<dt>num_retries</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) Specifies the allowed number of retries. This parameter is optional and
defaults to 1. These are the same conditions documented for
<a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-max-retries"><span class="std std-ref">x-envoy-max-retries</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-retrypolicy-per-try-timeout">
<dt>per_try_timeout</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) Specifies a non-zero timeout per retry attempt. This parameter is optional.
The same conditions documented for
<a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-upstream-rq-per-try-timeout-ms"><span class="std std-ref">x-envoy-upstream-rq-per-try-timeout-ms</span></a> apply.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If left unspecified, Envoy will use the global
<a class="reference internal" href="#envoy-api-field-routeaction-timeout"><span class="std std-ref">route timeout</span></a> for the request.
Consequently, when using a <a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-retry-on"><span class="std std-ref">5xx</span></a> based
retry policy, a request that times out will not be retried as the total timeout budget
would have been exhausted.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="routeaction-requestmirrorpolicy">
<span id="envoy-api-msg-routeaction-requestmirrorpolicy"></span><h2>RouteAction.RequestMirrorPolicy<a class="headerlink" href="#routeaction-requestmirrorpolicy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L415">[RouteAction.RequestMirrorPolicy proto]</a></p>
<p>The router is capable of shadowing traffic from one cluster to another. The current
implementation is “fire and forget,” meaning Envoy will not wait for the shadow cluster to
respond before returning the response from the primary cluster. All normal statistics are
collected for the shadow cluster making this feature useful for testing.</p>
<p>During shadowing, the host/authority header is altered such that <em>-shadow</em> is appended. This is
useful for logging. For example, <em>cluster1</em> becomes <em>cluster1-shadow</em>.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;cluster&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;runtime_key&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routeaction-requestmirrorpolicy-cluster">
<dt>cluster</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Specifies the cluster that requests will be mirrored to. The cluster must
exist in the cluster manager configuration.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-requestmirrorpolicy-runtime-key">
<dt>runtime_key</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) If not specified, all requests to the target cluster will be mirrored. If
specified, Envoy will lookup the runtime key to get the % of requests to
mirror. Valid values are from 0 to 10000, allowing for increments of
0.01% of requests to be mirrored. If the runtime key is specified in the
configuration but not present in runtime, 0 is the default and thus 0% of
requests will be mirrored.</dd>
</dl>
</div>
<div class="section" id="routeaction-hashpolicy">
<span id="envoy-api-msg-routeaction-hashpolicy"></span><h2>RouteAction.HashPolicy<a class="headerlink" href="#routeaction-hashpolicy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L463">[RouteAction.HashPolicy proto]</a></p>
<p>Specifies the route’s hashing policy if the upstream cluster uses a hashing <a class="reference internal" href="../intro/arch_overview/load_balancing.html#arch-overview-load-balancing-types"><span class="std std-ref">load balancer</span></a>.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;header&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cookie&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;connection_properties&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routeaction-hashpolicy-header">
<dt>header</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-routeaction-hashpolicy-header"><span class="std std-ref">RouteAction.HashPolicy.Header</span></a>) Header hash policy.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-cookie"><span class="std std-ref">cookie</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-connection-properties"><span class="std std-ref">connection_properties</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-hashpolicy-cookie">
<dt>cookie</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-routeaction-hashpolicy-cookie"><span class="std std-ref">RouteAction.HashPolicy.Cookie</span></a>) Cookie hash policy.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-cookie"><span class="std std-ref">cookie</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-connection-properties"><span class="std std-ref">connection_properties</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-hashpolicy-connection-properties">
<dt>connection_properties</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-routeaction-hashpolicy-connectionproperties"><span class="std std-ref">RouteAction.HashPolicy.ConnectionProperties</span></a>) Connection properties hash policy.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-header"><span class="std std-ref">header</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-cookie"><span class="std std-ref">cookie</span></a>, <a class="reference internal" href="#envoy-api-field-routeaction-hashpolicy-connection-properties"><span class="std std-ref">connection_properties</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="routeaction-hashpolicy-header">
<span id="envoy-api-msg-routeaction-hashpolicy-header"></span><h2>RouteAction.HashPolicy.Header<a class="headerlink" href="#routeaction-hashpolicy-header" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L464">[RouteAction.HashPolicy.Header proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;header_name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routeaction-hashpolicy-header-header-name">
<dt>header_name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The name of the request header that will be used to obtain the hash
key. If the request header is not present, no hash will be produced.</dd>
</dl>
</div>
<div class="section" id="routeaction-hashpolicy-cookie">
<span id="envoy-api-msg-routeaction-hashpolicy-cookie"></span><h2>RouteAction.HashPolicy.Cookie<a class="headerlink" href="#routeaction-hashpolicy-cookie" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L484">[RouteAction.HashPolicy.Cookie proto]</a></p>
<p>Envoy supports two types of cookie affinity:</p>
<ol class="arabic simple">
<li>Passive. Envoy takes a cookie that’s present in the cookies header and
hashes on its value.</li>
<li>Generated. Envoy generates and sets a cookie with an expiration (TTL)
on the first request from the client in its response to the client,
based on the endpoint the request gets sent to. The client then
presents this on the next and all subsequent requests. The hash of
this is sufficient to ensure these requests get sent to the same
endpoint. The cookie is generated by hashing the source and
destination ports and addresses so that multiple independent HTTP2
streams on the same connection will independently receive the same
cookie, even if they arrive at the Envoy simultaneously.</li>
</ol>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ttl&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routeaction-hashpolicy-cookie-name">
<dt>name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The name of the cookie that will be used to obtain the hash key. If the
cookie is not present and ttl below is not set, no hash will be
produced.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-routeaction-hashpolicy-cookie-ttl">
<dt>ttl</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration">Duration</a>) If specified, a cookie with the TTL will be generated if the cookie is
not present.</dd>
</dl>
</div>
<div class="section" id="routeaction-hashpolicy-connectionproperties">
<span id="envoy-api-msg-routeaction-hashpolicy-connectionproperties"></span><h2>RouteAction.HashPolicy.ConnectionProperties<a class="headerlink" href="#routeaction-hashpolicy-connectionproperties" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L495">[RouteAction.HashPolicy.ConnectionProperties proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;source_ip&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-routeaction-hashpolicy-connectionproperties-source-ip">
<dt>source_ip</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">bool</a>) Hash on source IP address.</dd>
</dl>
</div>
<div class="section" id="enum-routeaction-clusternotfoundresponsecode">
<span id="envoy-api-enum-routeaction-clusternotfoundresponsecode"></span><h2>Enum RouteAction.ClusterNotFoundResponseCode<a class="headerlink" href="#enum-routeaction-clusternotfoundresponsecode" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L333">[RouteAction.ClusterNotFoundResponseCode proto]</a></p>
<dl class="docutils" id="envoy-api-enum-value-routeaction-clusternotfoundresponsecode-service-unavailable">
<dt>SERVICE_UNAVAILABLE</dt>
<dd><em>(DEFAULT)</em> ⁣HTTP status code - 503 Service Unavailable.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-routeaction-clusternotfoundresponsecode-not-found">
<dt>NOT_FOUND</dt>
<dd>⁣HTTP status code - 404 Not Found.</dd>
</dl>
</div>
<div class="section" id="redirectaction">
<span id="envoy-api-msg-redirectaction"></span><h2>RedirectAction<a class="headerlink" href="#redirectaction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L548">[RedirectAction proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;host_redirect&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;path_redirect&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;response_code&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-redirectaction-host-redirect">
<dt>host_redirect</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The host portion of the URL will be swapped with this value.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-redirectaction-path-redirect">
<dt>path_redirect</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The path portion of the URL will be swapped with this value.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-redirectaction-response-code">
<dt>response_code</dt>
<dd>(<a class="reference internal" href="#envoy-api-enum-redirectaction-redirectresponsecode"><span class="std std-ref">RedirectAction.RedirectResponseCode</span></a>) The HTTP status code to use in the redirect response. The default response
code is MOVED_PERMANENTLY (301).</dd>
</dl>
</div>
<div class="section" id="enum-redirectaction-redirectresponsecode">
<span id="envoy-api-enum-redirectaction-redirectresponsecode"></span><h2>Enum RedirectAction.RedirectResponseCode<a class="headerlink" href="#enum-redirectaction-redirectresponsecode" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L555">[RedirectAction.RedirectResponseCode proto]</a></p>
<dl class="docutils" id="envoy-api-enum-value-redirectaction-redirectresponsecode-moved-permanently">
<dt>MOVED_PERMANENTLY</dt>
<dd><em>(DEFAULT)</em> ⁣Moved Permanently HTTP Status Code - 301.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-redirectaction-redirectresponsecode-found">
<dt>FOUND</dt>
<dd>⁣Found HTTP Status Code - 302.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-redirectaction-redirectresponsecode-see-other">
<dt>SEE_OTHER</dt>
<dd>⁣See Other HTTP Status Code - 303.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-redirectaction-redirectresponsecode-temporary-redirect">
<dt>TEMPORARY_REDIRECT</dt>
<dd>⁣Temporary Redirect HTTP Status Code - 307.</dd>
</dl>
<dl class="docutils" id="envoy-api-enum-value-redirectaction-redirectresponsecode-permanent-redirect">
<dt>PERMANENT_REDIRECT</dt>
<dd>⁣Permanent Redirect HTTP Status Code - 308.</dd>
</dl>
</div>
<div class="section" id="decorator">
<span id="envoy-api-msg-decorator"></span><h2>Decorator<a class="headerlink" href="#decorator" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L577">[Decorator proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-decorator-operation">
<dt>operation</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The operation name associated with the request matched to this route. If tracing is
enabled, this information will be used as the span name reported for this request.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For ingress (inbound) requests, or egress (outbound) responses, this value may be overridden
by the <a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-x-envoy-decorator-operation"><span class="std std-ref">x-envoy-decorator-operation</span></a> header.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="virtualcluster">
<span id="envoy-api-msg-virtualcluster"></span><h2>VirtualCluster<a class="headerlink" href="#virtualcluster" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L606">[VirtualCluster proto]</a></p>
<p>A virtual cluster is a way of specifying a regex matching rule against
certain important endpoints such that statistics are generated explicitly for
the matched requests. The reason this is useful is that when doing
prefix/path matching Envoy does not always know what the application
considers to be an endpoint. Thus, it’s impossible for Envoy to generically
emit per endpoint statistics. However, often systems have highly critical
endpoints that they wish to get “perfect” statistics on. Virtual cluster
statistics are perfect in the sense that they are emitted on the downstream
side such that they include network level failures.</p>
<p>Documentation for <a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-stats"><span class="std std-ref">virtual cluster statistics</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Virtual clusters are a useful tool, but we do not recommend setting up a virtual cluster for
every application endpoint. This is both not easily maintainable and as well the matching and
statistics output are not free.</p>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-virtualcluster-pattern">
<dt>pattern</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Specifies a regex pattern to use for matching requests. The entire path of the request
must match the regex. The regex grammar used is defined <a class="reference external" href="http://en.cppreference.com/w/cpp/regex/ecmascript">here</a>.</p>
<p>Examples:</p>
<ul class="last simple">
<li>The regex <em>/rides/d+</em> matches the path <em>/rides/0</em></li>
<li>The regex <em>/rides/d+</em> matches the path <em>/rides/123</em></li>
<li>The regex <em>/rides/d+</em> does not match the path <em>/rides/123/456</em></li>
</ul>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualcluster-name">
<dt>name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>)  Specifies the name of the virtual cluster. The virtual cluster name as well
as the virtual host name are used when emitting statistics. The statistics are emitted by the
router filter and are documented <a class="reference internal" href="../configuration/http_filters/router_filter.html#config-http-filters-router-stats"><span class="std std-ref">here</span></a>.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-virtualcluster-method">
<dt>method</dt>
<dd>(<a class="reference internal" href="base.proto.html#envoy-api-enum-requestmethod"><span class="std std-ref">RequestMethod</span></a>) Optionally specifies the HTTP method to match on. For example GET, PUT,
etc.</dd>
</dl>
</div>
<div class="section" id="ratelimit">
<span id="envoy-api-msg-ratelimit"></span><h2>RateLimit<a class="headerlink" href="#ratelimit" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L629">[RateLimit proto]</a></p>
<p>Global rate limiting <a class="reference internal" href="../intro/arch_overview/global_rate_limiting.html#arch-overview-rate-limit"><span class="std std-ref">architecture overview</span></a>.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;stage&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;disable_key&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-ratelimit-stage">
<dt>stage</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#uint32value">UInt32Value</a>) Refers to the stage set in the filter. The rate limit configuration only
applies to filters with the same stage number. The default stage number is
0.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The filter supports a range of 0 - 10 inclusively for stage numbers.</p>
</div>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-disable-key">
<dt>disable_key</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) The key to be set in runtime to disable this rate limit configuration.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-actions">
<dt>actions</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-ratelimit-action"><span class="std std-ref">RateLimit.Action</span></a>, <em>REQUIRED</em>) A list of actions that are to be applied for this rate limit configuration.
Order matters as the actions are processed sequentially and the descriptor
is composed by appending descriptor entries in that sequence. If an action
cannot append a descriptor entry, no descriptor is generated for the
configuration. See <a class="reference internal" href="../configuration/http_filters/rate_limit_filter.html#config-http-filters-rate-limit-composing-actions"><span class="std std-ref">composing actions</span></a> for additional documentation.</dd>
</dl>
</div>
<div class="section" id="ratelimit-action">
<span id="envoy-api-msg-ratelimit-action"></span><h2>RateLimit.Action<a class="headerlink" href="#ratelimit-action" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L642">[RateLimit.Action proto]</a></p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;source_cluster&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;destination_cluster&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;request_headers&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;remote_address&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;generic_key&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;header_value_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-ratelimit-action-source-cluster">
<dt>source_cluster</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-ratelimit-action-sourcecluster"><span class="std std-ref">RateLimit.Action.SourceCluster</span></a>) Rate limit on source cluster.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-ratelimit-action-source-cluster"><span class="std std-ref">source_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-destination-cluster"><span class="std std-ref">destination_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-remote-address"><span class="std std-ref">remote_address</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-generic-key"><span class="std std-ref">generic_key</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-header-value-match"><span class="std std-ref">header_value_match</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-action-destination-cluster">
<dt>destination_cluster</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-ratelimit-action-destinationcluster"><span class="std std-ref">RateLimit.Action.DestinationCluster</span></a>) Rate limit on destination cluster.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-ratelimit-action-source-cluster"><span class="std std-ref">source_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-destination-cluster"><span class="std std-ref">destination_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-remote-address"><span class="std std-ref">remote_address</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-generic-key"><span class="std std-ref">generic_key</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-header-value-match"><span class="std std-ref">header_value_match</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-action-request-headers">
<dt>request_headers</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-ratelimit-action-requestheaders"><span class="std std-ref">RateLimit.Action.RequestHeaders</span></a>) Rate limit on request headers.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-ratelimit-action-source-cluster"><span class="std std-ref">source_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-destination-cluster"><span class="std std-ref">destination_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-remote-address"><span class="std std-ref">remote_address</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-generic-key"><span class="std std-ref">generic_key</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-header-value-match"><span class="std std-ref">header_value_match</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-action-remote-address">
<dt>remote_address</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-ratelimit-action-remoteaddress"><span class="std std-ref">RateLimit.Action.RemoteAddress</span></a>) Rate limit on remote address.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-ratelimit-action-source-cluster"><span class="std std-ref">source_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-destination-cluster"><span class="std std-ref">destination_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-remote-address"><span class="std std-ref">remote_address</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-generic-key"><span class="std std-ref">generic_key</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-header-value-match"><span class="std std-ref">header_value_match</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-action-generic-key">
<dt>generic_key</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-ratelimit-action-generickey"><span class="std std-ref">RateLimit.Action.GenericKey</span></a>) Rate limit on a generic key.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-ratelimit-action-source-cluster"><span class="std std-ref">source_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-destination-cluster"><span class="std std-ref">destination_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-remote-address"><span class="std std-ref">remote_address</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-generic-key"><span class="std std-ref">generic_key</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-header-value-match"><span class="std std-ref">header_value_match</span></a> must be set.</p>
</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-action-header-value-match">
<dt>header_value_match</dt>
<dd><p class="first">(<a class="reference internal" href="#envoy-api-msg-ratelimit-action-headervaluematch"><span class="std std-ref">RateLimit.Action.HeaderValueMatch</span></a>) Rate limit on the existence of request headers.</p>
<p class="last">Precisely one of <a class="reference internal" href="#envoy-api-field-ratelimit-action-source-cluster"><span class="std std-ref">source_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-destination-cluster"><span class="std std-ref">destination_cluster</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-request-headers"><span class="std std-ref">request_headers</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-remote-address"><span class="std std-ref">remote_address</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-generic-key"><span class="std std-ref">generic_key</span></a>, <a class="reference internal" href="#envoy-api-field-ratelimit-action-header-value-match"><span class="std std-ref">header_value_match</span></a> must be set.</p>
</dd>
</dl>
</div>
<div class="section" id="ratelimit-action-sourcecluster">
<span id="envoy-api-msg-ratelimit-action-sourcecluster"></span><h2>RateLimit.Action.SourceCluster<a class="headerlink" href="#ratelimit-action-sourcecluster" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L650">[RateLimit.Action.SourceCluster proto]</a></p>
<p>The following descriptor entry is appended to the descriptor:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s">&quot;source_cluster&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;local service cluster&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>&lt;local service cluster&gt; is derived from the <a class="reference internal" href="../operations/cli.html#cmdoption-service-cluster"><code class="xref std std-option docutils literal"><span class="pre">--service-cluster</span></code></a> option.</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{}</span>
</pre></div>
</div>
</div>
<div class="section" id="ratelimit-action-destinationcluster">
<span id="envoy-api-msg-ratelimit-action-destinationcluster"></span><h2>RateLimit.Action.DestinationCluster<a class="headerlink" href="#ratelimit-action-destinationcluster" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L669">[RateLimit.Action.DestinationCluster proto]</a></p>
<p>The following descriptor entry is appended to the descriptor:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s">&quot;destination_cluster&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;routed target cluster&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once a request matches against a route table rule, a routed cluster is determined by one of
the following <a class="reference internal" href="#envoy-api-msg-routeconfiguration"><span class="std std-ref">route table configuration</span></a>
settings:</p>
<ul class="simple">
<li><a class="reference internal" href="#envoy-api-field-routeaction-cluster"><span class="std std-ref">cluster</span></a> indicates the upstream cluster
to route to.</li>
<li><a class="reference internal" href="#envoy-api-field-routeaction-weighted-clusters"><span class="std std-ref">weighted_clusters</span></a>
chooses a cluster randomly from a set of clusters with attributed weight.</li>
<li><a class="reference internal" href="#envoy-api-field-routeaction-cluster-header"><span class="std std-ref">cluster_header</span></a> indicates which
header in the request contains the target cluster.</li>
</ul>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{}</span>
</pre></div>
</div>
</div>
<div class="section" id="ratelimit-action-requestheaders">
<span id="envoy-api-msg-ratelimit-action-requestheaders"></span><h2>RateLimit.Action.RequestHeaders<a class="headerlink" href="#ratelimit-action-requestheaders" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L678">[RateLimit.Action.RequestHeaders proto]</a></p>
<p>The following descriptor entry is appended when a header contains a key that matches the
<em>header_name</em>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s">&quot;&lt;descriptor_key&gt;&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;header_value_queried_from_header&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;header_name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;descriptor_key&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-ratelimit-action-requestheaders-header-name">
<dt>header_name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The header name to be queried from the request headers. The header’s
value is used to populate the value of the descriptor entry for the
descriptor_key.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-action-requestheaders-descriptor-key">
<dt>descriptor_key</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The key to use in the descriptor entry.</dd>
</dl>
</div>
<div class="section" id="ratelimit-action-remoteaddress">
<span id="envoy-api-msg-ratelimit-action-remoteaddress"></span><h2>RateLimit.Action.RemoteAddress<a class="headerlink" href="#ratelimit-action-remoteaddress" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L694">[RateLimit.Action.RemoteAddress proto]</a></p>
<p>The following descriptor entry is appended to the descriptor and is populated using the
trusted address from <a class="reference internal" href="../configuration/http_conn_man/headers.html#config-http-conn-man-headers-x-forwarded-for"><span class="std std-ref">x-forwarded-for</span></a>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s">&quot;remote_address&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;trusted address from x-forwarded-for&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{}</span>
</pre></div>
</div>
</div>
<div class="section" id="ratelimit-action-generickey">
<span id="envoy-api-msg-ratelimit-action-generickey"></span><h2>RateLimit.Action.GenericKey<a class="headerlink" href="#ratelimit-action-generickey" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L702">[RateLimit.Action.GenericKey proto]</a></p>
<p>The following descriptor entry is appended to the descriptor:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s">&quot;generic_key&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;descriptor_value&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;descriptor_value&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-ratelimit-action-generickey-descriptor-value">
<dt>descriptor_value</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The value to use in the descriptor entry.</dd>
</dl>
</div>
<div class="section" id="ratelimit-action-headervaluematch">
<span id="envoy-api-msg-ratelimit-action-headervaluematch"></span><h2>RateLimit.Action.HeaderValueMatch<a class="headerlink" href="#ratelimit-action-headervaluematch" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L712">[RateLimit.Action.HeaderValueMatch proto]</a></p>
<p>The following descriptor entry is appended to the descriptor:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s">&quot;header_match&quot;</span><span class="p">,</span> <span class="s">&quot;&lt;descriptor_value&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;descriptor_value&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;expect_match&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span><span class="p">,</span>
  <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-ratelimit-action-headervaluematch-descriptor-value">
<dt>descriptor_value</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) The value to use in the descriptor entry.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-action-headervaluematch-expect-match">
<dt>expect_match</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) If set to true, the action will append a descriptor entry when the
request matches the headers. If set to false, the action will append a
descriptor entry when the request does not match the headers. The
default value is true.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-ratelimit-action-headervaluematch-headers">
<dt>headers</dt>
<dd>(<a class="reference internal" href="#envoy-api-msg-headermatcher"><span class="std std-ref">HeaderMatcher</span></a>, <em>REQUIRED</em>) Specifies a set of headers that the rate limit action should match
on. The action will check the request’s headers against all the
specified headers in the config. A match will happen if all the
headers in the config are present in the request with the same values
(or based on presence if the value field is not in the config).</dd>
</dl>
</div>
<div class="section" id="headermatcher">
<span id="envoy-api-msg-headermatcher"></span><h2>HeaderMatcher<a class="headerlink" href="#headermatcher" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/envoyproxy/data-plane-api/blob/master/api/rds.proto#L778">[HeaderMatcher proto]</a></p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Internally, Envoy always uses the HTTP/2 <em>:authority</em> header to represent the HTTP/1 <em>Host</em>
header. Thus, if attempting to match on <em>Host</em>, match on <em>:authority</em> instead.</p>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p>To route on HTTP method, use the special HTTP/2 <em>:method</em> header. This works for both
HTTP/1 and HTTP/2 as Envoy normalizes headers. E.g.,</p>
<div class="last highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;:method&quot;</span><span class="p">,</span>
  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;{...}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="docutils" id="envoy-api-field-headermatcher-name">
<dt>name</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>, <em>REQUIRED</em>) Specifies the name of the header in the request.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-headermatcher-value">
<dt>value</dt>
<dd>(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/proto#scalar">string</a>) Specifies the value of the header. If the value is absent a request that
has the name header will match, regardless of the header’s value.</dd>
</dl>
<dl class="docutils" id="envoy-api-field-headermatcher-regex">
<dt>regex</dt>
<dd><p class="first">(<a class="reference external" href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue">BoolValue</a>) Specifies whether the header value is a regular
expression or not. Defaults to false. The entire request header value must match the regex. The
rule will not match if only a subsequence of the request header value matches the regex. The
regex grammar used in the value field is defined
<a class="reference external" href="http://en.cppreference.com/w/cpp/regex/ecmascript">here</a>.</p>
<p>Examples:</p>
<ul class="last simple">
<li>The regex <em>d{3}</em> matches the value <em>123</em></li>
<li>The regex <em>d{3}</em> does not match the value <em>1234</em></li>
<li>The regex <em>d{3}</em> does not match the value <em>123.456</em></li>
</ul>
</dd>
</dl>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sds.proto.html" class="btn btn-neutral float-right" title="Common TLS configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="health_check.proto.html" class="btn btn-neutral" title="Health check" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2017, Envoy Project Authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.5.0-tag-v1.5.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
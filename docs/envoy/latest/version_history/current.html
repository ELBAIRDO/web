

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.17.0 (pending) &mdash; envoy 1.17.0-dev-b7fd07 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/envoy.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.16.0 (October 8, 2020)" href="v1.16.0.html" />
    <link rel="prev" title="Version history" href="version_history.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/envoy-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.17.0-dev-b7fd07
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about_docs.html">About the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../start/start.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Building and installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="version_history.html">Version history</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.17.0 (pending)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#incompatible-behavior-changes">Incompatible Behavior Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minor-behavior-changes">Minor Behavior Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#removed-config-or-runtime">Removed Config or Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-features">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecated">Deprecated</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="v1.16.0.html">1.16.0 (October 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.2.html">1.15.2 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.1.html">1.15.1 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.15.0.html">1.15.0 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.5.html">1.14.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.4.html">1.14.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.3.html">1.14.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.2.html">1.14.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.1.html">1.14.1 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.14.0.html">1.14.0 (April 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.6.html">1.13.6 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.5.html">1.13.5 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.4.html">1.13.4 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.3.html">1.13.3 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.2.html">1.13.2 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.1.html">1.13.1 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.13.0.html">1.13.0 (January 20, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.7.html">1.12.7 (September 29, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.6.html">1.12.6 (July 7, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.5.html">1.12.5 (June 30, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.4.html">1.12.4 (June 8, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.3.html">1.12.3 (March 3, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.2.html">1.12.2 (December 10, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.1.html">1.12.1 (November 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.12.0.html">1.12.0 (October 31, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.2.html">1.11.2 (October 8, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.1.html">1.11.1 (August 13, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.11.0.html">1.11.0 (July 11, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.10.0.html">1.10.0 (Apr 5, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.1.html">1.9.1 (Apr 2, 2019)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.9.0.html">1.9.0 (Dec 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.8.0.html">1.8.0 (Oct 4, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.7.0.html">1.7.0 (Jun 21, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.6.0.html">1.6.0 (March 20, 2018)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.5.0.html">1.5.0 (December 4, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.4.0.html">1.4.0 (August 24, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.3.0.html">1.3.0 (May 17, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2.0.html">1.2.0 (March 7, 2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1.0.html">1.1.0 (November 30, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0.0.html">1.0.0 (September 12, 2016)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#deprecation-policy">Deprecation Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../operations/operations.html">Operations and administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/extending.html">Extending Envoy for custom use cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/overview.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">envoy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="version_history.html">Version history</a> &raquo;</li>
        
      <li>1.17.0 (pending)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/version_history/current.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pending">
<h1>1.17.0 (pending)<a class="headerlink" href="#pending" title="Permalink to this headline">¶</a></h1>
<div class="section" id="incompatible-behavior-changes">
<h2>Incompatible Behavior Changes<a class="headerlink" href="#incompatible-behavior-changes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes that are expected to cause an incompatibility if applicable; deployment changes are likely required</em></p>
</div>
<div class="section" id="minor-behavior-changes">
<h2>Minor Behavior Changes<a class="headerlink" href="#minor-behavior-changes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes that may cause incompatibilities for some users, but should not for most</em></p>
</div>
<div class="section" id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<p><em>Changes expected to improve the state of the world and are unlikely to have negative effects</em></p>
</div>
<div class="section" id="removed-config-or-runtime">
<h2>Removed Config or Runtime<a class="headerlink" href="#removed-config-or-runtime" title="Permalink to this headline">¶</a></h2>
<p><em>Normally occurs at the end of the</em> <a class="reference internal" href="version_history.html#deprecated"><span class="std std-ref">deprecation period</span></a></p>
</div>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>access log: added a <a class="reference internal" href="../api-v3/config/accesslog/v3/accesslog.proto.html#envoy-v3-api-msg-config-accesslog-v3-metadatafilter"><span class="std std-ref">dynamic metadata filter</span></a> for access logs, which filters whether to log based on matching dynamic metadata.</p></li>
<li><p>access log: added support for <a class="reference internal" href="../configuration/observability/access_log/usage.html#config-access-log-format-response-flags"><span class="std std-ref">%DOWNSTREAM_PEER_FINGERPRINT_1%</span></a> as a response flag.</p></li>
<li><p>access log: added support for <a class="reference internal" href="../configuration/observability/access_log/usage.html#config-access-log-format-connection-termination-details"><span class="std std-ref">%CONNECTION_TERMINATION_DETAILS%</span></a> as a log command operator about why the connection is terminated by Envoy.</p></li>
<li><p>access log: added support for nested objects in <a class="reference internal" href="../configuration/observability/access_log/usage.html#config-access-log-format-dictionaries"><span class="std std-ref">JSON logging mode</span></a>.</p></li>
<li><p>access log: added <a class="reference internal" href="../api-v3/config/core/v3/substitution_format_string.proto.html#envoy-v3-api-field-config-core-v3-substitutionformatstring-omit-empty-values"><span class="std std-ref">omit_empty_values</span></a> option to omit unset value from formatted log.</p></li>
<li><p>access log: added support for <a class="reference internal" href="../configuration/observability/access_log/usage.html#config-access-log-format-connection-id"><span class="std std-ref">%CONNECTION_ID%</span></a> for the downstream connection identifier.</p></li>
<li><p>admin: added <a class="reference internal" href="../api-v3/config/cluster/v3/circuit_breaker.proto.html#envoy-v3-api-msg-config-cluster-v3-circuitbreakers"><span class="std std-ref">circuit breakers settings</span></a> information to GET /clusters?format=json <a class="reference internal" href="../api-v3/admin/v3/clusters.proto.html#envoy-v3-api-msg-admin-v3-clusterstatus"><span class="std std-ref">cluster status</span></a>.</p></li>
<li><p>admin: added <a class="reference internal" href="../api-v3/config/core/v3/base.proto.html#envoy-v3-api-msg-config-core-v3-node"><span class="std std-ref">node</span></a> information to GET /server_info <a class="reference internal" href="../api-v3/admin/v3/server_info.proto.html#envoy-v3-api-msg-admin-v3-serverinfo"><span class="std std-ref">response object</span></a>.</p></li>
<li><p>admin: added the ability to dump init manager unready targets information <a class="reference internal" href="../operations/admin.html#operations-admin-interface-init-dump"><span class="std std-ref">/init_dump</span></a> and <a class="reference internal" href="../operations/admin.html#operations-admin-interface-init-dump-by-mask"><span class="std std-ref">/init_dump?mask={}</span></a>.</p></li>
<li><p>admission control: added the <a class="reference internal" href="../api-v3/extensions/filters/http/admission_control/v3alpha/admission_control.proto.html#envoy-v3-api-msg-extensions-filters-http-admission-control-v3alpha-admissioncontrol"><span class="std std-ref">admission control</span></a> filter for client-side request throttling.</p></li>
<li><p>build: enable building envoy <a class="reference internal" href="../install/building.html#arm-binaries"><span class="std std-ref">arm64 images</span></a> by buildx tool in x86 CI platform.</p></li>
<li><p>cluster: added new <a class="reference internal" href="../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-connection-pool-per-downstream-connection"><span class="std std-ref">connection_pool_per_downstream_connection</span></a> flag, which enable creation of a new connection pool for each downstream connection.</p></li>
<li><p>decompressor filter: reports compressed and uncompressed bytes in trailers.</p></li>
<li><p>dns: added support for doing DNS resolution using Apple’s DnsService APIs in Apple platforms (macOS, iOS). This feature is ON by default, and is only configurable via the <cite>envoy.restart_features.use_apple_api_for_dns_lookups</cite> runtime key. Note that this value is latched during server startup and changing the runtime key is a no-op during the lifetime of the process.</p></li>
<li><p>dns_filter: added support for answering <a class="reference internal" href="../api-v3/data/dns/v3/dns_table.proto.html#envoy-v3-api-msg-data-dns-v3-dnstable-dnsservice"><span class="std std-ref">service record</span></a> queries.</p></li>
<li><p>dynamic_forward_proxy: added <a class="reference internal" href="../api-v3/extensions/common/dynamic_forward_proxy/v3/dns_cache.proto.html#envoy-v3-api-field-extensions-common-dynamic-forward-proxy-v3-dnscacheconfig-use-tcp-for-dns-lookups"><span class="std std-ref">use_tcp_for_dns_lookups</span></a> option to use TCP for DNS lookups in order to match the DNS options for <a class="reference internal" href="../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-msg-config-cluster-v3-cluster"><span class="std std-ref">Clusters</span></a>.</p></li>
<li><p>ext_authz filter: added support for emitting dynamic metadata for both <a class="reference internal" href="../configuration/http/http_filters/ext_authz_filter.html#config-http-filters-ext-authz-dynamic-metadata"><span class="std std-ref">HTTP</span></a> and <a class="reference internal" href="../configuration/listeners/network_filters/ext_authz_filter.html#config-network-filters-ext-authz-dynamic-metadata"><span class="std std-ref">network</span></a> filters.
The emitted dynamic metadata is set by <a class="reference internal" href="../api-v3/service/auth/v3/external_auth.proto.html#envoy-v3-api-field-service-auth-v3-checkresponse-dynamic-metadata"><span class="std std-ref">dynamic metadata</span></a> field in a returned <a class="reference internal" href="../api-v3/service/auth/v3/external_auth.proto.html#envoy-v3-api-msg-service-auth-v3-checkresponse"><span class="std std-ref">CheckResponse</span></a>.</p></li>
<li><p>ext_authz filter: added <a class="reference internal" href="../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-stat-prefix"><span class="std std-ref">stat_prefix</span></a> as an optional additional prefix for the statistics emitted from <cite>ext_authz</cite> HTTP filter.</p></li>
<li><p>ext_authz filter: added support for enabling the filter based on <a class="reference internal" href="../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-extauthz-filter-enabled-metadata"><span class="std std-ref">dynamic metadata</span></a>.</p></li>
<li><p>ext_authz filter: added support for letting the authorization server instruct Envoy to remove headers from the original request by setting the new field <a class="reference internal" href="../api-v3/service/auth/v3/external_auth.proto.html#envoy-v3-api-field-service-auth-v3-okhttpresponse-headers-to-remove"><span class="std std-ref">headers_to_remove</span></a> before forwarding it to the upstream.</p></li>
<li><p>ext_authz filter: added support for sending <a class="reference internal" href="../api-v3/service/auth/v3/attribute_context.proto.html#envoy-v3-api-field-service-auth-v3-attributecontext-httprequest-raw-body"><span class="std std-ref">raw bytes as request body</span></a> of a gRPC check request by setting <a class="reference internal" href="../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-buffersettings-pack-as-bytes"><span class="std std-ref">pack_as_bytes</span></a> to true.</p></li>
<li><p>ext_authz_filter: added <a class="reference internal" href="../api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto.html#envoy-v3-api-field-extensions-filters-http-ext-authz-v3-checksettings-disable-request-body-buffering"><span class="std std-ref">disable_request_body_buffering</span></a> to disable request data buffering per-route.</p></li>
<li><p>grpc-json: support specifying <cite>response_body</cite> field in for <cite>google.api.HttpBody</cite> message.</p></li>
<li><p>hds: added <a class="reference internal" href="../api-v3/service/health/v3/hds.proto.html#envoy-v3-api-field-service-health-v3-endpointhealthresponse-cluster-endpoints-health"><span class="std std-ref">cluster_endpoints_health</span></a> to HDS responses, keeping endpoints in the same groupings as they were configured in the HDS specifier by cluster and locality instead of as a flat list.</p></li>
<li><p>hds: added <a class="reference internal" href="../api-v3/service/health/v3/hds.proto.html#envoy-v3-api-field-service-health-v3-clusterhealthcheck-transport-socket-matches"><span class="std std-ref">transport_socket_matches</span></a> to HDS cluster health check specifier, so the existing match filter <a class="reference internal" href="../api-v3/config/core/v3/health_check.proto.html#envoy-v3-api-field-config-core-v3-healthcheck-transport-socket-match-criteria"><span class="std std-ref">transport_socket_match_criteria</span></a> in the repeated field <a class="reference internal" href="../api-v3/service/health/v3/hds.proto.html#envoy-v3-api-field-service-health-v3-clusterhealthcheck-health-checks"><span class="std std-ref">health_checks</span></a> has context to match against. This unblocks support for health checks over HTTPS and HTTP/2.</p></li>
<li><p>hot restart: added <a class="reference internal" href="../operations/cli.html#cmdoption-socket-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">--socket-path</span></code></a> and <a class="reference internal" href="../operations/cli.html#cmdoption-socket-mode"><code class="xref std std-option docutils literal notranslate"><span class="pre">--socket-mode</span></code></a> to configure UDS path in the filesystem and set permission to it.</p></li>
<li><p>http: added HTTP/2 support for <a class="reference internal" href="../api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-http2protocoloptions-connection-keepalive"><span class="std std-ref">connection keepalive</span></a> via PING.</p></li>
<li><p>http: added support for <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">%DOWNSTREAM_PEER_FINGERPRINT_1%</span></a> as custom header.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v3/config/core/v3/protocol.proto.html#envoy-v3-api-field-config-core-v3-http1protocoloptions-allow-chunked-length"><span class="std std-ref">allow_chunked_length</span></a> configuration option for HTTP/1 codec to allow processing requests/responses with both Content-Length and Transfer-Encoding: chunked headers. If such message is served and option is enabled - per RFC Content-Length is ignored and removed.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v3/extensions/filters/http/cdn_loop/v3alpha/cdn_loop.proto.html#envoy-v3-api-msg-extensions-filters-http-cdn-loop-v3alpha-cdnloopconfig"><span class="std std-ref">CDN Loop filter</span></a> and <a class="reference internal" href="../configuration/http/http_filters/cdn_loop_filter.html#config-http-filters-cdn-loop"><span class="std std-ref">documentation</span></a>.</p></li>
<li><p>http: added <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-routeaction-maxstreamduration"><span class="std std-ref">MaxStreamDuration proto</span></a> for configuring per-route downstream duration timeouts.</p></li>
<li><p>http: introduced new HTTP/1 and HTTP/2 codec implementations that will remove the use of exceptions for control flow due to high risk factors and instead use error statuses. The old behavior is used by default for HTTP/1.1 and HTTP/2 server connections. The new codecs can be enabled for testing by setting the runtime feature <cite>envoy.reloadable_features.new_codec_behavior</cite> to true. The new codecs will be in development for one month, and then enabled by default while the old codecs are deprecated.</p></li>
<li><p>http: modified the HTTP header-map data-structure to use an underlying dictionary and a list (no change to the header-map API). To conform with previous versions, the use of a dictionary is currently disabled. It can be enabled by setting the <cite>envoy.http.headermap.lazy_map_min_size</cite> runtime feature to a non-negative number which defines the minimal number of headers in a request/response/trailers required for using a dictionary in addition to the list. Our current benchmarks suggest that the value 3 is a good threshold for most workloads.</p></li>
<li><p>load balancer: added <a class="reference internal" href="../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-msg-config-cluster-v3-cluster-maglevlbconfig"><span class="std std-ref">RingHashLbConfig</span></a> to configure the table size of Maglev consistent hash.</p></li>
<li><p>load balancer: added a <a class="reference internal" href="../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-msg-config-cluster-v3-cluster-leastrequestlbconfig"><span class="std std-ref">configuration</span></a> option to specify the active request bias used by the least request load balancer.</p></li>
<li><p>load balancer: added an <a class="reference internal" href="../api-v3/config/cluster/v3/cluster.proto.html#envoy-v3-api-field-config-cluster-v3-cluster-lbsubsetconfig-lbsubsetselector-single-host-per-subset"><span class="std std-ref">option</span></a> to optimize subset load balancing when there is only one host per subset.</p></li>
<li><p>load balancer: added support for bounded load per host for consistent hash load balancers via <a class="reference internal" href="../api-v2/api/v2/cluster.proto.html#envoy-api-field-cluster-commonlbconfig-consistent-hashing-lb-config"><span class="std std-ref">hash_balance_factor</span></a>.</p></li>
<li><p>local_ratelimit: added new <a class="reference internal" href="../configuration/http/http_filters/local_rate_limit_filter.html#config-http-filters-local-rate-limit"><span class="std std-ref">HTTP local ratelimit filter</span></a>.</p></li>
<li><p>local_reply config: added <a class="reference internal" href="../api-v3/config/core/v3/substitution_format_string.proto.html#envoy-v3-api-field-config-core-v3-substitutionformatstring-content-type"><span class="std std-ref">content_type</span></a> field to set content-type.</p></li>
<li><p>lua: added Lua APIs to access <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-ssl-socket-info"><span class="std std-ref">SSL connection info</span></a> object.</p></li>
<li><p>lua: added Lua API for <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-stream-handle-api-base64-escape"><span class="std std-ref">base64 escaping a string</span></a>.</p></li>
<li><p>lua: added Lua API for <a class="reference internal" href="../configuration/http/http_filters/lua_filter.html#config-http-filters-lua-buffer-wrapper-api-set-bytes"><span class="std std-ref">setting the current buffer content</span></a>.</p></li>
<li><p>lua: added new <a class="reference internal" href="../api-v3/extensions/filters/http/lua/v3/lua.proto.html#envoy-v3-api-field-extensions-filters-http-lua-v3-luaperroute-source-code"><span class="std std-ref">source_code</span></a> field to support the dispatching of inline Lua code in per route configuration of Lua filter.</p></li>
<li><p>overload management: add <a class="reference internal" href="../api-v3/config/overload/v3/overload.proto.html#envoy-v3-api-field-config-overload-v3-trigger-scaled"><span class="std std-ref">scaling</span></a> trigger for OverloadManager actions.</p></li>
<li><p>postgres network filter: <a class="reference internal" href="../configuration/listeners/network_filters/postgres_proxy_filter.html#config-network-filters-postgres-proxy-dynamic-metadata"><span class="std std-ref">metadata</span></a> is produced based on SQL query.</p></li>
<li><p>proxy protocol: added support for generating the header upstream using <a class="reference internal" href="../api-v3/extensions/transport_sockets/proxy_protocol/v3/upstream_proxy_protocol.proto.html#extension-envoy-transport-sockets-upstream-proxy-protocol"><span class="std std-ref">Proxy Protocol Transport Socket</span></a>.</p></li>
<li><p>ratelimit: added <a class="reference internal" href="../api-v3/extensions/filters/http/ratelimit/v3/rate_limit.proto.html#envoy-v3-api-msg-extensions-filters-http-ratelimit-v3-ratelimit"><span class="std std-ref">enable_x_ratelimit_headers</span></a> option to enable <cite>X-RateLimit-*</cite> headers as defined in <a class="reference external" href="https://tools.ietf.org/id/draft-polli-ratelimit-headers-03.html">draft RFC</a>.</p></li>
<li><p>ratelimit: added <a class="reference internal" href="../api-v3/extensions/filters/http/ratelimit/v3/rate_limit.proto.html#envoy-v3-api-msg-extensions-filters-http-ratelimit-v3-ratelimitperroute"><span class="std std-ref">per route config</span></a> for rate limit filter.</p></li>
<li><p>ratelimit: added support for optional <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-ratelimit-action-generic-key"><span class="std std-ref">descriptor_key</span></a> to Generic Key action.</p></li>
<li><p>rbac filter: added the name of the matched policy to the response code detail when a request is rejected by the RBAC filter.</p></li>
<li><p>rbac filter: added a log action to the <a class="reference internal" href="../api-v3/config/rbac/v3/rbac.proto.html#envoy-v3-api-msg-config-rbac-v3-rbac"><span class="std std-ref">RBAC filter</span></a> which sets dynamic metadata to inform access loggers whether to log.</p></li>
<li><p>redis: added fault injection support <a class="reference internal" href="../api-v3/extensions/filters/network/redis_proxy/v3/redis_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-redis-proxy-v3-redisproxy-faults"><span class="std std-ref">fault injection for redis proxy</span></a>, described further in <a class="reference internal" href="../configuration/listeners/network_filters/redis_proxy_filter.html#config-network-filters-redis-proxy"><span class="std std-ref">configuration documentation</span></a>.</p></li>
<li><p>router: added a new <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-msg-config-route-v3-retrypolicy-ratelimitedretrybackoff"><span class="std std-ref">rate limited retry back off</span></a> strategy that uses headers like <cite>Retry-After</cite> or <cite>X-RateLimit-Reset</cite> to decide the back off interval.</p></li>
<li><p>router: added new
<a class="reference internal" href="../configuration/http/http_filters/router_filter.html#config-http-filters-router-retry-policy-envoy-ratelimited"><span class="std std-ref">envoy-ratelimited</span></a>
retry policy, which allows retrying envoy’s own rate limited responses.</p></li>
<li><p>router: added new <a class="reference internal" href="../api-v3/config/route/v3/route_components.proto.html#envoy-v3-api-field-config-route-v3-routeaction-host-rewrite-path-regex"><span class="std std-ref">host_rewrite_path_regex</span></a>
option, which allows rewriting Host header based on path.</p></li>
<li><p>router: added support for DYNAMIC_METADATA <a class="reference internal" href="../configuration/http/http_conn_man/headers.html#config-http-conn-man-headers-custom-request-headers"><span class="std std-ref">header formatter</span></a>.</p></li>
<li><p>router_check_tool: added support for <cite>request_header_matches</cite>, <cite>response_header_matches</cite> to <a class="reference internal" href="../configuration/operations/tools/router_check.html#config-tools-router-check-tool"><span class="std std-ref">router check tool</span></a>.</p></li>
<li><p>signal: added support for calling fatal error handlers without envoy’s signal handler, via FatalErrorHandler::callFatalErrorHandlers().</p></li>
<li><p>stats: added optional histograms to <a class="reference internal" href="../configuration/upstream/cluster_manager/cluster_stats.html#config-cluster-manager-cluster-stats-request-response-sizes"><span class="std std-ref">cluster stats</span></a>
that track headers and body sizes of requests and responses.</p></li>
<li><p>stats: allow configuring histogram buckets for stats sinks and admin endpoints that support it.</p></li>
<li><p>tap: added <a class="reference internal" href="../api-v3/config/tap/v3/common.proto.html#envoy-v3-api-msg-config-tap-v3-httpgenericbodymatch"><span class="std std-ref">generic body matcher</span></a> to scan http requests and responses for text or hex patterns.</p></li>
<li><p>tcp_proxy: added <a class="reference internal" href="../api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto.html#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-max-downstream-connection-duration"><span class="std std-ref">max_downstream_connection_duration</span></a> for downstream connection. When max duration is reached the connection will be closed.</p></li>
<li><p>tcp_proxy: allow earlier network filters to set metadataMatchCriteria on the connection StreamInfo to influence load balancing.</p></li>
<li><p>tls: added OCSP stapling support through the <a class="reference internal" href="../api-v3/extensions/transport_sockets/tls/v3/common.proto.html#envoy-v3-api-msg-extensions-transport-sockets-tls-v3-tlscertificate"><span class="std std-ref">ocsp_staple</span></a> and <a class="reference internal" href="../api-v3/extensions/transport_sockets/tls/v3/tls.proto.html#envoy-v3-api-msg-extensions-transport-sockets-tls-v3-downstreamtlscontext"><span class="std std-ref">ocsp_staple_policy</span></a> configuration options. See <a class="reference internal" href="../intro/arch_overview/security/ssl.html#arch-overview-ssl-ocsp-stapling"><span class="std std-ref">OCSP Stapling</span></a> for usage and runtime flags.</p></li>
<li><p>tls: introduce new <a class="reference internal" href="../api-v3/extensions/transport_sockets/tls/v3/tls.proto.html#envoy-v3-api-field-extensions-transport-sockets-tls-v3-commontlscontext-custom-handshaker"><span class="std std-ref">extension point</span></a> for overriding <a class="reference internal" href="../intro/arch_overview/security/ssl.html#arch-overview-ssl"><span class="std std-ref">TLS handshaker</span></a> behavior.</p></li>
<li><p>tls: switched from using socket BIOs to using custom BIOs that know how to interact with IoHandles. The feature can be disabled by setting runtime feature <cite>envoy.reloadable_features.tls_use_io_handle_bio</cite> to false.</p></li>
<li><p>tracing: added ability to set some <a class="reference internal" href="../api-v3/config/trace/v3/xray.proto.html#envoy-v3-api-field-config-trace-v3-xrayconfig-segment-fields"><span class="std std-ref">optional segment fields</span></a> in the AWS  X-Ray tracer.</p></li>
<li><p>udp_proxy: added <a class="reference internal" href="../api-v3/extensions/filters/udp/udp_proxy/v3/udp_proxy.proto.html#envoy-v3-api-msg-extensions-filters-udp-udp-proxy-v3-udpproxyconfig"><span class="std std-ref">hash_policies</span></a> to support hash based routing.</p></li>
<li><p>udp_proxy: added <a class="reference internal" href="../api-v3/extensions/filters/udp/udp_proxy/v3/udp_proxy.proto.html#envoy-v3-api-msg-extensions-filters-udp-udp-proxy-v3-udpproxyconfig"><span class="std std-ref">use_original_src_ip</span></a> option to replicate the downstream remote address of the packets on the upstream side of Envoy. It is similar to <a class="reference internal" href="../api-v3/extensions/filters/listener/original_src/v3/original_src.proto.html#envoy-v3-api-msg-extensions-filters-listener-original-src-v3-originalsrc"><span class="std std-ref">original source filter</span></a>.</p></li>
<li><p>watchdog: support randomizing the watchdog’s kill timeout to prevent synchronized kills via a maximium jitter parameter <a class="reference internal" href="../api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-watchdog-max-kill-timeout-jitter"><span class="std std-ref">max_kill_timeout_jitter</span></a>.</p></li>
<li><p>watchdog: supports an extension point where actions can be registered to fire on watchdog events such as miss, megamiss, kill and multikill. See <a class="reference internal" href="../api-v3/config/bootstrap/v3/bootstrap.proto.html#envoy-v3-api-field-config-bootstrap-v3-watchdog-actions"><span class="std std-ref">watchdog actions</span></a>.</p></li>
<li><p>watchdog: watchdog action extension that does cpu profiling. See <a class="reference internal" href="../api-v3/extensions/watchdog/profile_action/v3alpha/profile_action.proto.html#envoy-v3-api-file-envoy-extensions-watchdog-profile-action-v3alpha-profile-action-proto"><span class="std std-ref">Profile Action</span></a>.</p></li>
<li><p>watchdog: watchdog action extension that sends SIGABRT to the stuck thread to terminate the process. See <a class="reference internal" href="../api-v3/extensions/watchdog/abort_action/v3alpha/abort_action.proto.html#envoy-v3-api-file-envoy-extensions-watchdog-abort-action-v3alpha-abort-action-proto"><span class="std std-ref">Abort Action</span></a>.</p></li>
<li><p>xds: added <a class="reference internal" href="../api-v3/config/core/v3/extension.proto.html#envoy-v3-api-msg-config-core-v3-extensionconfigsource"><span class="std std-ref">extension config discovery</span></a> support for HTTP filters.</p></li>
<li><p>xds: added support for mixed v2/v3 discovery response, which enable type url downgrade and upgrade. This feature is disabled by default and is controlled by runtime guard <cite>envoy.reloadable_features.enable_type_url_downgrade_and_upgrade</cite>.</p></li>
<li><p>zlib: added option to use <a class="reference external" href="https://github.com/zlib-ng/zlib-ng">zlib-ng</a> as zlib library.</p></li>
</ul>
</div>
<div class="section" id="deprecated">
<h2>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="v1.16.0.html" class="btn btn-neutral float-right" title="1.16.0 (October 8, 2020)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="version_history.html" class="btn btn-neutral float-left" title="Version history" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016-2020, Envoy Project Authors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>